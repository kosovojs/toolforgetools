(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,n){"use strict";n.r(e);n(3),n(4);var o=n(1),r=n.n(o),a=(n(5),function(t,e,n){r()({text:t,duration:n,newWindow:!0,close:!0,gravity:"bottom",position:"right",backgroundColor:"error"===e?"#f8d7da":"#d4edda",stopOnFocus:!0,onClick:function(){}}).showToast()}),i=function(){var t=document.getElementById("username"),e=document.getElementById("login");fetch("".concat("https://tools.wmflabs.org/edgars/api.php","?action=userinfo")).then(function(t){return t.json()}).then(function(n){if("error"in n)t.innerHTML="",e.innerHTML='<a href="https://tools.wmflabs.org/edgars?action=authorize" target="_parent">ienākt</a>';else{var o=n.query.userinfo.name;t.innerHTML="Sveiks, ".concat(o,"!"),e.innerHTML='<a href="https://tools.wmflabs.org/edgars?action=logout" target="_parent">iziet</a>'}}).catch(function(t){a("Nevar nolasīt autentifikācijas statusu","error",5e3)})};n.d(e,"handleVoteSave",function(){return l}),n.d(e,"updateUserCount",function(){return d}),n.d(e,"voteButtonElement",function(){return u}),n.d(e,"votingButtons",function(){return c});var c=document.getElementsByClassName("votingCheckbox"),s=document.getElementById("currentUserCount"),u=document.getElementById("voteButton"),d=function(t){var e=document.querySelectorAll("input[type=checkbox]:checked").length;s.innerHTML="Pašlaik izvēlētais dalībnieku skaits: ".concat(e),s.classList.toggle("warning",e>t),e>t||0==e?u.setAttribute("disabled",""):u.hasAttribute("disabled")&&u.removeAttribute("disabled")},l=function(t){var e=document.querySelectorAll("input[type=checkbox]:checked"),n=[];Array.from(e).forEach(function(t){n.push(t.getAttribute("data-user"))}),fetch("https://tools.wmflabs.org/edgars/mvw2019/api/index.php",{method:"post",body:JSON.stringify({vote:t,users:n})}).then(function(t){return t.json()}).then(function(t){"error"===t.status?a("Notika kļūda: ".concat(t.msg),"error",5e3):a("Paldies, balsojums pieņemts!","ok",2500)}).catch(function(t){a("Notika kļūda: ".concat(t),"error",5e3)})};window.addEventListener("load",function(){Array.from(c).forEach(function(t){"checkbox"===t.type&&(t.checked=!1)}),i()})},,,function(t,e,n){}]]);