(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a(259)},133:function(e,t,a){},255:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(19),s=a.n(r),c=(a(133),a(14)),o=a(15),i=a(17),m=a(16),u=a(18),d=(a(135),a(67)),h=a(117),p=a(35),g=a(260),b=a(262),E=a(263),j=a(70),f=(n.Component,n.Component,function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props;e.isLogged,e.userName;return l.a.createElement(b.a,null,l.a.createElement(E.a,null,l.a.createElement(j.IndexLinkContainer,{to:"/"},l.a.createElement(g.a,null,"CEE projects")),l.a.createElement(j.LinkContainer,{to:"/new"},l.a.createElement(g.a,null,"Add project"))))}}]),t}(n.Component)),v=a(42),y=a(4),O=a(39),C=a(45),N=a.n(C),k=a(40),D=a(43),w=a.n(D),T=a(261),P="//tools.wmflabs.org/edgars/cee/api.php",F=(a(216),a(74)),M=a.n(F),L=a(37),S=a.n(L),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={title:"",description:"",links:"",projTypes:[],themes:[],wmProjects:[],languages:[],users:[],loadedTypes:[{value:"contest",label:"contest"}],loadedThemes:[{value:"education",label:"education"},{value:"GLAM",label:"GLAM"}],loadedWmProjects:[{value:"Wikipedia",label:"Wikipedia"},{value:"Commons",label:"Commons"},{value:"etc.",label:"etc."}],loadedLanguages:[],loadedUsers:[],hasUserBennLoggedIn:!1,startDate:void 0,endDate:void 0,ranges:{Today:[S()(),S()()],Yesterday:[S()().subtract(1,"days"),S()().subtract(1,"days")],"Last 7 Days":[S()().subtract(6,"days"),S()()],"Last 30 Days":[S()().subtract(29,"days"),S()()],"This Month":[S()().startOf("month"),S()().endOf("month")],"Last Month":[S()().subtract(1,"month").startOf("month"),S()().subtract(1,"month").endOf("month")]}},a.handleInput=a.handleInput.bind(Object(y.a)(Object(y.a)(a))),a.handleEventStart=a.handleEventStart.bind(Object(y.a)(Object(y.a)(a))),a.handleEventEnd=a.handleEventEnd.bind(Object(y.a)(Object(y.a)(a))),a.saveToDB=a.saveToDB.bind(Object(y.a)(Object(y.a)(a))),a.deleteStart=a.deleteData.bind(Object(y.a)(Object(y.a)(a)),"start"),a.deleteEnd=a.deleteData.bind(Object(y.a)(Object(y.a)(a)),"end"),a.handleTypesChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"projTypes"),a.handleThemesChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"themes"),a.handlewmProjectsChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"wmProjects"),a.handlelanguagesChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"languages"),a.handleusersChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"users"),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"saveToDB",value:function(e){if(e.preventDefault(),""===this.state.title)O.toast.error("You have to fill at least title!",{autoClose:!1});else{var t={title:this.state.title,description:this.state.description,links:this.state.links,projTypes:this.state.projTypes,themes:this.state.themes,wmProjects:this.state.wmProjects,languages:this.state.languages,users:this.state.users,start:this.state.startDate&&this.state.startDate.format("YYYY-MM-DD")||"",end:this.state.endDate&&this.state.endDate.format("YYYY-MM-DD")||""};N.a.ajax({type:"post",url:P,dataType:"json",data:{data:t,act:"new_article"}}).done(function(e){"success"===e.status?O.toast.success("Project succesfully saved!",{autoClose:3500}):"error"===e.status&&O.toast.error("Error: "+e.message,{autoClose:!1})}).fail(function(e,t,a){console.log("Status: "+t),console.log("Error: "+a),console.log(e),O.toast.error("Error, see console for original error",{autoClose:!1})})}}},{key:"handleInput",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(v.a)({},n,a))}},{key:"deleteData",value:function(e,t){"start"===e?this.setState({startDate:void 0}):"end"===e&&this.setState({endDate:void 0})}},{key:"handleEventStart",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"handleEventEnd",value:function(e,t){this.setState({endDate:t.startDate})}},{key:"handleChange",value:function(e,t){this.setState(Object(v.a)({},e,t.map(function(e){return e.value})))}},{key:"render",value:function(){var e=this.state.startDate&&this.state.startDate.format("YYYY-MM-DD")||"",t=this.state.endDate&&this.state.endDate.format("YYYY-MM-DD")||"",a={width:"100%"};return l.a.createElement("div",{className:"container"},l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputTitle",className:"col-sm-2 control-label"},"Project title",l.a.createElement("span",{style:{color:"red",fontSize:"large"}},"*")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"My cool GLAM project",value:this.state.title,onChange:this.handleInput}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputDescription",className:"col-sm-2 control-label"},"Project description"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("textarea",{name:"description",className:"form-control",rows:"3",placeholder:"What can you tell about this project?",value:this.state.description,onChange:this.handleInput}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputDescription",className:"col-sm-2 control-label"},"Links about project"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("textarea",{name:"links",className:"form-control",rows:"3",placeholder:"One link per line\r\nhttp://www.example.com\r\nhttps://meta.wikimedia.org/wiki/Wikimedia_Central_and_Eastern_Europe",value:this.state.links,onChange:this.handleInput}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Project type"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(w.a,{placeholder:"select one of existing or start typing your option...",isMulti:!0,name:"inputProjectType",options:this.state.loadedTypes,onChange:this.handleTypesChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Theme"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(w.a,{placeholder:"select one of existing or start typing your option...",isMulti:!0,name:"inputProjectType",options:this.state.loadedThemes,onChange:this.handleThemesChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Wikimedia projects (wp, wd, qoute etc.)"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(w.a,{placeholder:"select one of existing or start typing your option...",isMulti:!0,name:"inputProjectType",options:this.state.loadedWmProjects,onChange:this.handlewmProjectsChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Languages/countries/communities"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(w.a,{placeholder:"select one of existing or start typing your option...",isMulti:!0,name:"inputProjectType",options:this.state.loadedLanguages,onChange:this.handlelanguagesChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Users to contact"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(w.a,{placeholder:"start typing your option...",isMulti:!0,onChange:this.handleusersChange,options:this.state.loadedUsers}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"Start"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(M.a,{singleDatePicker:!0,drops:"up",autoUpdateInput:!1,autoApply:!1,startDate:this.state.startDate,onEvent:this.handleEventStart},l.a.createElement(T.a,{className:"selected-date-range-btn",style:a},l.a.createElement("div",{className:"pull-left"},l.a.createElement("i",{className:"fa fa-calendar"}),"\xa0",l.a.createElement("span",null,e)),l.a.createElement("div",{className:"pull-right"},l.a.createElement("i",{className:"fa fa-angle-down"}))))),l.a.createElement("div",{className:"col-sm-1"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deleteStart},"X"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputProjectType",className:"col-sm-2 control-label"},"End"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(M.a,{singleDatePicker:!0,drops:"up",autoUpdateInput:!1,startDate:this.state.endDate,onEvent:this.handleEventEnd},l.a.createElement(T.a,{className:"selected-date-range-btn",style:a},l.a.createElement("div",{className:"pull-left"},l.a.createElement("i",{className:"fa fa-calendar"}),"\xa0",l.a.createElement("span",null,t)),l.a.createElement("div",{className:"pull-right"},l.a.createElement("i",{className:"fa fa-angle-down"}))))),l.a.createElement("div",{className:"col-sm-1"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deleteEnd},"X"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-sm-offset-2 col-sm-10"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveToDB},"Save!")))))}}]),t}(n.Component),Y=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.project,a=e.label,n=e.query;return l.a.createElement(W,{linkStart:"https://"+t+".wikipedia.org/wiki/",query:I(n," ","_"),label:a})}}]),t}(n.Component),I=function(e,t,a){return e.replace(new RegExp(t,"g"),a)},W=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.linkStart,a=e.query,n=e.label,r=encodeURIComponent(a),s=I(n,"_"," ");return l.a.createElement("a",{target:"_blank",href:t+r},s)}}]),t}(n.Component),U=(n.Component,function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data;return l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-heading"},l.a.createElement("h3",{className:"panel-title"},e.title)),l.a.createElement("div",{className:"panel-body"},e.description,l.a.createElement("br",null),e.users.length>0&&l.a.createElement("div",null,l.a.createElement("i",null,"Who should I contact? "),e.users.map(function(e,t){return l.a.createElement(Y,{label:e,project:"meta",query:"User:"+e})}).reduce(function(e,t){return[e,", ",t]})),e.themes.length>0&&l.a.createElement("div",null,l.a.createElement("i",null,"Themes: "),e.themes.reduce(function(e,t){return[e,", ",t]})),e.projTypes.length>0&&l.a.createElement("div",null,l.a.createElement("i",null,"Project type: "),e.projTypes.reduce(function(e,t){return[e,", ",t]})),e.wmProjects.length>0&&l.a.createElement("div",null,l.a.createElement("i",null,"Wikimedia projects: "),e.wmProjects.reduce(function(e,t){return[e,", ",t]})),e.languages.length>0&&l.a.createElement("div",null,l.a.createElement("i",null,"Languages/communities/countries: "),e.languages.reduce(function(e,t){return[e,", ",t]})))))}}]),t}(n.Component)),_=a(126),B=a.n(_),A=function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Welcome"),"Welcome to CEE project database! Feel free to explore existing projects and please add yours!")},q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={dataHasLoaded:!1,dataLoaderror:!1,projectData:[],filterData:[],titleFilter:"",themesFilter:[],typeFilter:[],wpProjectFilter:[],languageFilter:[],userFilter:[]},a.handleInput=a.handleInput.bind(Object(y.a)(Object(y.a)(a))),a.handleThemeChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"themesFilter"),a.handleTypeChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"typeFilter"),a.handleWMProjectChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"wpProjectFilter"),a.handleLanguageChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"languageFilter"),a.handleUserChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a)),"userFilter"),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e,t){this.setState(Object(v.a)({},e,t.map(function(e){return e.value})))}},{key:"handleInput",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(v.a)({},n,a))}},{key:"componentDidMount",value:function(){var e=this;fetch(P+"?act=main").then(function(e){return e.json()}).then(function(t){e.setState({dataHasLoaded:!0,projectData:t.data,filterData:t.choices})},function(t){e.setState({dataHasLoaded:!0,dataLoaderror:t})})}},{key:"render",value:function(){var e=this;return this.state.dataLoaderror?l.a.createElement("div",{className:"container"},"Some error occured, please contact ",l.a.createElement("a",{href:"https://lv.wikipedia.org/wiki/Dal\u012bbnieka_diskusija:Edgars2007",target:"_blank"},"Edgars2007")):this.state.dataHasLoaded?(console.log(0===this.state.themesFilter.length),l.a.createElement("div",{className:"container"},l.a.createElement(A,null),l.a.createElement("div",{className:"clear"}),l.a.createElement("h3",null,"Filter"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Title"),l.a.createElement("input",{type:"text",name:"titleFilter",className:"form-control",placeholder:"My cool GLAM project",value:this.state.titleFilter,onChange:this.handleInput})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Theme"),l.a.createElement(k.a,{isMulti:!0,options:this.state.filterData.themes,onChange:this.handleThemeChange})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Project type"),l.a.createElement(k.a,{isMulti:!0,options:this.state.filterData.projTypes,onChange:this.handleTypeChange}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Wikimedia project"),l.a.createElement(k.a,{isMulti:!0,options:this.state.filterData.wmProjects,onChange:this.handleWMProjectChange})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Languages/countries"),l.a.createElement(k.a,{isMulti:!0,options:this.state.filterData.languages,onChange:this.handleLanguageChange})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Users"),l.a.createElement(k.a,{isMulti:!0,options:this.state.filterData.users,onChange:this.handleUserChange}))),l.a.createElement("div",{className:"clear"}),l.a.createElement("h3",null,"Projects"),l.a.createElement(B.a,null,this.state.projectData.filter(function(t){return""===e.state.titleFilter||t.title.toLowerCase().includes(e.state.titleFilter.toLowerCase())}).filter(function(t){return 0===e.state.themesFilter.length||t.themes.some(function(t){return e.state.themesFilter.includes(t)})}).filter(function(t){return 0===e.state.typeFilter.length||t.projTypes.some(function(t){return e.state.typeFilter.includes(t)})}).filter(function(t){return 0===e.state.wpProjectFilter.length||t.wmProjects.some(function(t){return e.state.wpProjectFilter.includes(t)})}).filter(function(t){return 0===e.state.languageFilter.length||t.languages.some(function(t){return e.state.languageFilter.includes(t)})}).filter(function(t){return 0===e.state.userFilter.length||t.users.some(function(t){return e.state.userFilter.includes(t)})}).map(function(e,t){return l.a.createElement(U,{data:e,key:t})})))):l.a.createElement("div",{className:"container"},"Wait a moment, the data is loading")}}]),t}(n.Component),H=(a(255),a(257),function(e){var t=e.location;return l.a.createElement("div",null,l.a.createElement("h3",null,"Did not found page for ",l.a.createElement("code",null,t.pathname)))}),G=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement("div",null,l.a.createElement(f,null),l.a.createElement(h.a,null,l.a.createElement(p.a,{exact:!0,path:"/",component:q}),l.a.createElement(p.a,{exact:!0,path:"/new",component:x}),l.a.createElement(p.a,{component:H})),l.a.createElement(O.ToastContainer,{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!0})))}}]),t}(n.Component);s.a.render(l.a.createElement(G,null),document.getElementById("root"))}},[[128,2,1]]]);
//# sourceMappingURL=main.335d5156.chunk.js.map